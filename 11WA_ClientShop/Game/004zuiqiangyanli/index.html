﻿<!DOCTYPE html>
<html>
<head>
    <script src="/Scripts/jquery-1.8.2.min.js"></script>
    <script src="/Game/GameUserID.js?version=js201709121928"></script>
    <script type="text/javascript">
        var varThisGame = "";
    </script>   

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="robots" content="index,follow">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;">
    <title>最强眼力-微商城</title>
    <link href="9.css?version=css201709121928" media="screen" rel="stylesheet" type="text/css">
    <script>       
        //new Image().src = '/wenzhangku.com';
        var moreGamesLocation = 'http://webuy8.com';
        function play68_init() { updateShare(0); }
        function updateShare(bestScore) {
            imgUrl = 'http://csoliver.eggsoft.cn/Game/004zuiqiangyanli/boyaa-logo11.png';
            var domains = ['http://csoliver.eggsoft.cn/'];
            var domain = domains[new Date().getTime() % 4]; lineLink = 'http://csoliver.eggsoft.cn/Game/004zuiqiangyanli/index.html'; descContent = "考考你的眼力！你的眼睛跟得上吗？"; updateShareScore(bestScore); appid = '';
        }
        function updateShareScore(bestScore) {
            if (bestScore > 0) { shareTitle = "我玩《微商城最强眼力》过了" + bestScore + "关，眼都花了！"; }
            else { shareTitle = "不玩《微商城最强眼力》怎么知道自己的眼力原来那么好？"; }
        }
    </script>
  
</head>


<body onload="load_Multi();" class="os-windows osv-6_1 osmv-6" onorientationchange="orentationChanged()">
    <div class="main">
        <div id="frame">
            <div id="logo" style="display: none; opacity: 0;"></div>
            <div id="playButton" style="display: none; opacity: 1;"></div>
            <div id="level" style="display: none;">
                <span id="levelLabel">关卡：</span>
                <span id="levelNum">1</span>
            </div>
            <div id="lives" style="display: none;">
                <div id="hearts"><div class="heart">&nbsp;</div><div class="heart">&nbsp;</div><div class="heart">&nbsp;</div></div>
                <div id="livesLabel">命：</div>
            </div>
            <div id="b" style="display: block;">
                <div style="display: block;" id="b1"></div>
                <div style="display: block;" id="b2"></div>
                <div style="display: block;" id="b3"></div>
            </div>
            <canvas height="240" width="320" id="canvas" style="display: block;"></canvas><div id="msg" style="position:relative;display: block; opacity: 1;bottom:50px;"></div>
        </div>
        <div style="position:relative; display: block; margin: 0px auto;bottom:150px;z-index:20000">

            <a style="font-size: 15px;color: #f00;font-weight: bold;display: block;height: 30px;line-height: 30px;" onclick="window.open(mebtnopenurl)">关注我们</a><br />
            <a style="font-size: 15px;color: #f00;font-weight: bold;display: block;height: 30px;line-height: 30px;" onclick="window.open(mebtnopenurl)">更多精彩</a><br />
            <a id="lookatme" style="font-size: 15px;color: #f00;font-weight: bold;display: block;height: 30px;line-height: 30px;" onclick="window.open(mebtnopenurl)">查看微店</a>
        </div>
        <script type="text/javascript" src="9.js?version=js201709121928"></script>
    </div>


    <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script>
        function load_Multi() {
            var varReturn = getUserID();
            if (varReturn > -1) {
                do_GetGameInfo();
                init();
            }
        }
        var WeiXin_shareAppAllPageTitle;
        var WeiXin_descAppPageContent;
        var WeiXin_imgAllPageUrl;

        function do_MeGetAjaxShareWeiXin() {
            var varGetPub_Agent_Path201709121928_Open_0609 = localStorage.getItem('GetPub_Agent_Path201709121928_Open_0609');
            var host = window.location.host;
            var path_AllPageLink = '';
            if ((varGetPub_Agent_Path201709121928_Open_0609 == null) || (varGetPub_Agent_Path201709121928_Open_0609 == '')) {
                path_AllPageLink = 'https://' + host + '/game/004zuiqiangyanli/index.html' + window.location.search;
                WeiXin_descAppPageContent = varThisGame + '怎么知道自己的眼力原来那么好';
            }
            else {
                var varTemp = varGetPub_Agent_Path201709121928_Open_0609;
                var varNeed = '';
                var value = varTemp.replace(/[^0-9]/ig, "");
                if (varTemp.indexOf("-") > 0) {
                    varNeed = '&parentagentid=' + value;
                } else if (varTemp.indexOf(".") > 0) {
                    varNeed = '&parentagentadid=' + value;
                }


                //debugger;
                path_AllPageLink = 'https://' + host + '/game/004zuiqiangyanli/index.html' + window.location.search + varNeed;
                WeiXin_descAppPageContent = localStorage.getItem('GetUserNickName201709121928_Open_0609') + varThisGame + '怎么知道自己的眼力原来那么好';
            }
            WeiXin_imgAllPageUrl = localStorage.getItem('GetUserHeadImage201709121928_Open_0609');
            var WeiXin_lineAllPageLink = path_AllPageLink;
            WeiXin_shareAppAllPageTitle = localStorage.getItem('GetShopClientName201709121928_Open_0609') + varThisGame;
            do_GetAjaxShareWeiXin(localStorage.getItem('GetShopClientID201709121928_Open_0609'), path_AllPageLink, WeiXin_shareAppAllPageTitle, WeiXin_descAppPageContent, WeiXin_imgAllPageUrl);
        }

        function do_GetGameInfo() {
            var url = "https://Service.eggsoft.cn/User/Game_Vouchers.asmx/_GetGameInfo";
            //var url = "http://localhost/14WcfS/User/Game_Vouchers.asmx/_GetGameInfo";

            var Request = new QueryString();
            var gameid = Request["gameid"];
            url += "?gameid=" + gameid;
            //alert("do_GetGameInfo");
            var result = -1;
            $.ajax({
                type: "POST",
                url: url,
                async: false,//如果想同步 async设置为false就可以（默认是true）
                dataType: "jsonp",
                jsonp: "jsonp", //传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(默认为:callback)
                jsonpCallback: "jsonp148566Callback", //自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名
                contentType: "application/json; charset=utf-8",
                success: function (json) {
                    result = parseInt(json.ErrorCode);
                    if (result == 0) {
                        varThisGame = json.GameName;
                        do_MeGetAjaxShareWeiXin();
                        document.title = localStorage.getItem('GetUserNickName201709121928_Open_0609') + varThisGame;
                        $("#lookatme").html(localStorage.getItem('GetUserNickName201709121928_Open_0609') + varThisGame);// 设置HTML 内容
                        HOME_PATH = json.JumpURL;
                        mebtnopenurl = json.JumpURL;
                    }
                    else if (result == -2) {
                        alert("游戏已结束" + gameid);
                        varThisGame = "游戏已结束";
                        var varJumpURL = json.JumpURL;
                        window.location = (varJumpURL);
                    } else if (result == -1) {
                        varThisGame = "游戏不可用";
                        alert("游戏不可用" + gameid);
                        var varJumpURL = json.JumpURL;
                        window.location = (varJumpURL);
                    }
                    //alert(varThisGame);
                },
                error: function () {
                }
            });



            return result;
        }

    </script>
    <script type="text/javascript">
        function testAddAsync(intHowMany) {
            //SendMoneyAddAsync(intpInt_Session_CurUserID, ShopClientID, MoneyOrGouWuQuan, intmoney, strgamename)
            //从返回页面传参数过时，读取存储中的数据；
            var Request = new QueryString();
            var gameid = Request["gameid"];

            SendMoneyAddAsync(localStorage.getItem("CurUserID201709121928_Open_0609"), localStorage.getItem("GetShopClientID201709121928_Open_0609"), intHowMany, gameid); ///2是购物券
        }
    </script>

</body>
</html>