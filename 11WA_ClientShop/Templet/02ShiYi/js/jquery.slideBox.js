(function(b){b.fn.slideBox=function(w){var q={direction:"left",duration:0.6,easing:"swing",delay:3,startIndex:0,hideClickBar:true,clickBarRadius:5,hideBottomBar:false,width:null,height:null};var s=b.extend(q,w||{});var A=b(this),t=A.children("ul.items"),z=t.find("li"),v=z.first().find("img");var x=z.size(),y=0,a=0;var D="ASC";var r=function(){if(!A.size()){return false}y=s.height?s.height:z.first().height();a=s.width?s.width:z.first().width();A.css({width:a+"px",height:y+"px"});z.css({width:a+"px",height:y+"px"});if(s.direction=="left"){t.css("width",x*a+"px")}else{t.css("height",x*y+"px")}t.find("li:eq("+s.startIndex+")").addClass("active");if(!s.hideBottomBar){var d=b('<div class="tips"></div>').css("opacity",0.6).appendTo(A);var e=b('<div class="title"></div>').html(function(){var f=t.find("li.active").find("a"),h=f.attr("title"),g=f.attr("href");return b("<a>").attr("href",g).text(h)}).appendTo(d);var c=b('<div class="nums"></div>').hide().appendTo(d);z.each(function(f,j){var k=b(j).find("a"),g=k.attr("title"),i=k.attr("href"),h="";f==s.startIndex&&(h="active");b("<a>").attr("href",i).text(g).addClass(h).css("borderRadius",s.clickBarRadius+"px").mouseover(function(){b(this).addClass("active").siblings().removeClass("active");t.find("li:eq("+b(this).index()+")").addClass("active").siblings().removeClass("active");u();C()}).appendTo(c)});if(s.hideClickBar){d.hover(function(){c.animate({top:"0px"},"fast")},function(){c.animate({top:d.height()+"px"},"fast")});c.show().delay(2000).animate({top:d.height()+"px"},"fast")}else{c.show()}}z.size()>1&&u()};var u=function(){var c=t.find("li.active"),e=c.find("a");var d=c.index();if(s.direction=="left"){offset=d*a*-1;param={left:offset+"px"}}else{offset=d*y*-1;param={top:offset+"px"}}A.find(".nums").find("a:eq("+d+")").addClass("active").siblings().removeClass("active");A.find(".title").find("a").attr("href",e.attr("href")).text(e.attr("title"));t.stop().animate(param,s.duration*1000,s.easing,function(){c.removeClass("active");if(D=="ASC"){if(c.next().size()){c.next().addClass("active")}else{D="DESC";c.prev().addClass("active")}}else{if(D=="DESC"){if(c.prev().size()){c.prev().addClass("active")}else{D="ASC";c.next().addClass("active")}}}});A.data("timeid",window.setTimeout(u,s.delay*1000))};var C=function(){window.clearTimeout(A.data("timeid"))};A.hover(function(){C()},function(){window.setTimeout(u,s.delay*1000)});var B=new Image();B.onload=function(){B.onload=null;r()};B.src=v.attr("src")}})(jQuery);