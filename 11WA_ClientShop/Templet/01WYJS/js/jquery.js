(function(c,a){var b=function(d,h,e){var f;return function(){function i(){if(!e){d.apply(m,g)}f=null}var m=this,g=arguments;if(f){clearTimeout(f)}else{if(e){d.apply(m,g)}}f=setTimeout(i,h||150)}};jQuery.fn[a]=function(d){return d?this.bind("resize",b(d)):this.trigger(a)}})(jQuery,"smartresize");(function(a){a.Gal=function(b,c){this.element=a(c);this._init(b)};a.Gal.settings={selector:".item",width:225,gutter:20,animate:false,animationOptions:{speed:200,duration:300,effect:"fadeInOnAppear",queue:true,complete:function(){}}};a.Gal.prototype={_init:function(b){var c=this;this.name=this._setName(5);this.gridArr=[];this.gridArrAppend=[];this.gridArrPrepend=[];this.setArr=false;this.setGrid=false;this.setOptions;this.cols=0;this.itemCount=0;this.prependCount=0;this.isPrepending=false;this.appendCount=0;this.resetCount=true;this.ifCallback=true;this.box=this.element;this.options=a.extend(true,{},a.Gal.settings,b);this.gridArr=a.makeArray(this.box.find(this.options.selector));this.isResizing=false;this.w=0;this.boxArr=[];this._setCols();this._renderGrid("append");a(this.box).addClass("gridalicious");a(window).smartresize(function(){c.resize()})},_setName:function(d,b){b=b?b:"";return d?this._setName(--d,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(Math.random()*60))+b):b},_setCols:function(){this.cols=Math.floor(this.box.width()/this.options.width);diff=(this.box.width()-this.cols*this.options.width-this.options.gutter)/this.cols;w=(this.options.width+diff)/this.box.width()*100;this.w=w;for(var d=0;d<this.cols;d++){var b=a("<div></div>").addClass("galcolumn").attr("id","item"+d+this.name).css({width:w+"%",paddingLeft:this.options.gutter,paddingBottom:this.options.gutter,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(b)}this.box.find(a("#clear"+this.name)).remove();var c=a("<div></div>").css({clear:"both",height:"0",width:"0",display:"block"}).attr("id","clear"+this.name);this.box.append(c)},_renderGrid:function(m,i,j,b){var c=[];var k=[];var n=[];var o=0;var p=this.prependCount;var e=this.appendCount;var f=this.options.gutter;var g=this.cols;var d=this.name;var l=0;var h=a(".galcolumn").width();if(i){k=i;if(m=="append"){e+=j;o=this.appendCount}if(m=="prepend"){this.isPrepending=true;o=Math.round(j%g);if(o<=0){o=g}}if(m=="renderAfterPrepend"){e+=j;o=j}}else{k=this.gridArr;e=a(this.gridArr).size()}a.each(k,function(r,s){var t=a(s);var q="100%";if(t.hasClass("not-responsive")){q="auto"}t.css({marginBottom:f,zoom:"1",filter:"alpha(opacity=0)",opacity:"0"}).find("img, object, embed, iframe").css({width:q,height:"auto",display:"block","margin-left":"auto","margin-right":"auto"});if(m=="prepend"){o--;a("#item"+o+d).prepend(t);c.push(t);if(o==0){o=g}}else{a("#item"+o+d).append(t);c.push(t);o++;if(o>=g){o=0}if(e>=g){e=e-g}}});this.appendCount=e;this.itemCount=o;if(m=="append"||m=="prepend"){if(m=="prepend"){this._updateAfterPrepend(this.gridArr,k)}this._renderItem(c);this.isPrepending=false}else{this._renderItem(this.gridArr)}},_collectItems:function(){var b=[];a(this.box).find(this.options.selector).each(function(c){b.push(a(this))});return b},_renderItem:function(f){var g=this.options.animationOptions.speed;var h=this.options.animationOptions.effect;var i=this.options.animationOptions.duration;var j=this.options.animationOptions.queue;var b=this.options.animate;var c=this.options.animationOptions.complete;var d=0;var e=0;if(b===true&&!this.isResizing){if(j===true&&h=="fadeInOnAppear"){if(this.isPrepending){f.reverse()}a.each(f,function(k,l){setTimeout(function(){a(l).animate({opacity:"1.0"},i);e++;if(e==f.length){c.call(undefined,f)}},d*g);d++})}else{if(j===false&&h=="fadeInOnAppear"){if(this.isPrepending){f.reverse()}a.each(f,function(k,l){a(l).animate({opacity:"1.0"},i);e++;if(e==f.length){if(this.ifCallback){c.call(undefined,f)}}})}}if(j===true&&!h){a.each(f,function(k,l){a(l).css({opacity:"1",filter:"alpha(opacity=1)"});e++;if(e==f.length){if(this.ifCallback){c.call(undefined,f)}}})}}else{a.each(f,function(l,k){a(k).css({opacity:"1",filter:"alpha(opacity=1)"})});if(this.ifCallback){}}},_updateAfterPrepend:function(d,b){var c=this.gridArr;a.each(b,function(e,f){c.unshift(f)});this.gridArr=c},resize:function(){this.box.find(a(".galcolumn")).remove();this._setCols();this.ifCallback=false;this.isResizing=true;this._renderGrid("append");this.ifCallback=true;this.isResizing=false},append:function(d){var b=this.gridArr;var c=this.gridArrPrepend;a.each(d,function(e,f){b.push(f);c.push(f)});this._renderGrid("append",d,a(d).size())},prepend:function(b){this.ifCallback=false;this._renderGrid("prepend",b,a(b).size());this.ifCallback=true}};a.fn.gridalicious=function(b,c){if(typeof b==="string"){this.each(function(){var d=a.data(this,"gridalicious");d[b].apply(d,[c])})}else{this.each(function(){a.data(this,"gridalicious",new a.Gal(b,this))})}return this}})(jQuery);