(function(s){var n=false;var v=null;var p={};var m={};var u={};var x;var o;var q;var t;var r={};var w=false;s.getMousePosition=function(b){var a=0;var c=0;if(!b){var b=window.event}if(b.pageX||b.pageY){a=b.pageX;c=b.pageY}else{if(b.clientX||b.clientY){a=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}return{x:a,y:c}};s.updatePosition=function(d){var a=s.getMousePosition(d);var b=(a.x-x);var c=(a.y-o);s(v).css("top",(q+c));s(v).css("left",(t+b))};s(document).mousemove(function(a){if(n&&r[v.id]!="false"){s.updatePosition(a);if(m[v.id]!=undefined){m[v.id](a,v)}return false}});s(document).mouseup(function(a){if(n&&r[v.id]!="false"){n=false;if(p[v.id]!=undefined){p[v.id](a,v)}return false}});s.fn.ondrag=function(a){return this.each(function(){m[this.id]=a})};s.fn.ondrop=function(a){return this.each(function(){p[this.id]=a})};s.fn.dragOff=function(){return this.each(function(){r[this.id]="off"})};s.fn.dragOn=function(){return this.each(function(){r[this.id]="on"})};s.fn.setHandler=function(a){return this.each(function(){var b=this;u[this.id]=true;s(b).css("cursor","");r[b.id]="handler";s("#"+a).css("cursor","move");s("#"+a).mousedown(function(c){w=true;s(b).trigger("mousedown",c)});s("#"+a).mouseup(function(c){w=false})})};s.fn.easydrag=function(a){return this.each(function(){if(undefined==this.id||!this.id.length){this.id="easydrag"+(new Date().getTime())}u[this.id]=a?true:false;r[this.id]="on";s(this).css("cursor","move");s(this).mousedown(function(b){if((r[this.id]=="off")||(r[this.id]=="handler"&&!w)){return u[this.id]}s(this).css("position","absolute");s(this).css("z-index",parseInt(new Date().getTime()/1000));n=true;v=this;var c=s.getMousePosition(b);x=c.x;o=c.y;q=this.offsetTop;t=this.offsetLeft;s.updatePosition(b);return u[this.id]})})}})(jQuery);